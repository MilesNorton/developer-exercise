/**
 * @jest-environment node
 */
import { parseJsonAsObject, parseCsvFile } from "../../src/functions/csvParser";
import {
  ICsvRowData,
  ICsvDataRange
} from "../../src/functions/commonInterface";

const dataFromFile: ICsvRowData = {
  "1960": "50.776",
  "1961": "50.761",
  "1962": "50.746",
  "1963": "50.73",
  "1964": "50.715",
  "1965": "50.7",
  "1966": "50.685",
  "1967": "50.67",
  "1968": "50.654",
  "1969": "50.639",
  "1970": "50.624",
  "1971": "50.609",
  "1972": "50.593",
  "1973": "50.578",
  "1974": "50.563",
  "1975": "50.548",
  "1976": "50.532",
  "1977": "50.517",
  "1978": "50.502",
  "1979": "50.487",
  "1980": "50.472",
  "1981": "50.456",
  "1982": "50.441",
  "1983": "50.426",
  "1984": "50.411",
  "1985": "50.395",
  "1986": "50.38",
  "1987": "50.365",
  "1988": "50.35",
  "1989": "50.335",
  "1990": "50.319",
  "1991": "50.304",
  "1992": "49.998",
  "1993": "49.588",
  "1994": "49.177",
  "1995": "48.767",
  "1996": "48.356",
  "1997": "47.946",
  "1998": "47.536",
  "1999": "47.127",
  "2000": "46.717",
  "2001": "46.339",
  "2002": "45.972",
  "2003": "45.606",
  "2004": "45.24",
  "2005": "44.875",
  "2006": "44.511",
  "2007": "44.147",
  "2008": "43.783",
  "2009": "43.421",
  "2010": "43.059",
  "2011": "42.94",
  "2012": "42.957",
  "2013": "42.99",
  "2014": "43.041",
  "2015": "43.108",
  "2016": "43.192",
  "2017": "43.293",
  "Country Name": "Aruba",
  "Country Code": "ABW",
  "Indicator Name": "Urban population (% of total)",
  "Indicator Code": "SP.URB.TOTL.IN.ZS"
};

const dataConversion: ICsvDataRange = {
  dataToBeObserved: [
    { date: 1960, value: 50.776 },
    { date: 1961, value: 50.761 },
    { date: 1962, value: 50.746 },
    { date: 1963, value: 50.73 },
    { date: 1964, value: 50.715 },
    { date: 1965, value: 50.7 },
    { date: 1966, value: 50.685 },
    { date: 1967, value: 50.67 },
    { date: 1968, value: 50.654 },
    { date: 1969, value: 50.639 },
    { date: 1970, value: 50.624 },
    { date: 1971, value: 50.609 },
    { date: 1972, value: 50.593 },
    { date: 1973, value: 50.578 },
    { date: 1974, value: 50.563 },
    { date: 1975, value: 50.548 },
    { date: 1976, value: 50.532 },
    { date: 1977, value: 50.517 },
    { date: 1978, value: 50.502 },
    { date: 1979, value: 50.487 },
    { date: 1980, value: 50.472 },
    { date: 1981, value: 50.456 },
    { date: 1982, value: 50.441 },
    { date: 1983, value: 50.426 },
    { date: 1984, value: 50.411 },
    { date: 1985, value: 50.395 },
    { date: 1986, value: 50.38 },
    { date: 1987, value: 50.365 },
    { date: 1988, value: 50.35 },
    { date: 1989, value: 50.335 },
    { date: 1990, value: 50.319 },
    { date: 1991, value: 50.304 },
    { date: 1992, value: 49.998 },
    { date: 1993, value: 49.588 },
    { date: 1994, value: 49.177 },
    { date: 1995, value: 48.767 },
    { date: 1996, value: 48.356 },
    { date: 1997, value: 47.946 },
    { date: 1998, value: 47.536 },
    { date: 1999, value: 47.127 },
    { date: 2000, value: 46.717 },
    { date: 2001, value: 46.339 },
    { date: 2002, value: 45.972 },
    { date: 2003, value: 45.606 },
    { date: 2004, value: 45.24 },
    { date: 2005, value: 44.875 },
    { date: 2006, value: 44.511 },
    { date: 2007, value: 44.147 },
    { date: 2008, value: 43.783 },
    { date: 2009, value: 43.421 },
    { date: 2010, value: 43.059 },
    { date: 2011, value: 42.94 },
    { date: 2012, value: 42.957 },
    { date: 2013, value: 42.99 },
    { date: 2014, value: 43.041 },
    { date: 2015, value: 43.108 },
    { date: 2016, value: 43.192 },
    { date: 2017, value: 43.293 }
  ],
  countryName: "Aruba",
  countryCode: "ABW",
  indicatorName: "Urban population (% of total)",
  indicatorCode: "SP.URB.TOTL.IN.ZS"
};
describe("Testing csvParser.ts", () => {
  test("parseCsvFile - test 1", () => {
    parseCsvFile("./test-data.csv", 4).then(data => {
      expect(data).toEqual([dataFromFile]);
    });
  });
  test("parseJsonAsObject - test 1", () => {
    expect(parseJsonAsObject([dataFromFile])).toEqual([dataConversion]);
  });
});
